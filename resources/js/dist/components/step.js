// resources/js/components/step.js
function stepComponent({
  key,
  selector,
  requiresAction
}) {
  return {
    targetElement: null,
    // You can define any other Alpine.js properties here.
    initialize: function() {
      this.targetElement = this.findElement(key);
      setTimeout(() => {
        console.log("initialize");
        console.log("this.$el", this.$el);
        const dialog = this.$root.querySelector("[data-dialog]");
        console.log("dialogos", dialog);
        const clipPath = this.$root.querySelector("[data-clip-path]");
        console.log("clipPath", clipPath);
        console.log("requiresAction", requiresAction);
        if (requiresAction) {
          this.targetElement.addEventListener("click", (event) => {
            event.preventDefault();
            console.log("$wire", this.$wire.nextTutorialStep());
            this.targetElement.blur();
            const descendants = this.targetElement.querySelectorAll(":hover");
            for (let i = 0; i < descendants.length; i++) {
              const descendant = descendants[i];
              descendant.blur();
            }
          });
        }
        this.initializeDialog();
      }, 1);
    },
    // You can define any other Alpine.js functions here.
    initializeDialog: function(dialog = null) {
      if (!dialog) {
        dialog = this.$root.querySelector("[data-dialog]");
      }
      const dialogPath = dialog.querySelector("[data-dialog-path]");
      console.log("initializeDialog");
      const rect = this.elementRect();
      const stroke = dialog.querySelector("[data-dialog-stroke]");
      const width = rect[1].x - rect[0].x;
      const height = rect[2].y - rect[0].y;
      console.log("IMPORTANT HERE");
      console.log("width", width);
      console.log("height", height);
      console.log("rect", rect);
      const x = rect[0].x;
      const y = rect[0].y;
      console.log("x", x);
      console.log("y", y);
      console.log("dialog", dialog);
      dialog.style.width = `${width}px`;
      dialog.style.transform = `translate(${x}px, ${y}px)`;
      stroke.style.height = `${height}px`;
      dialogPath.setAttribute("d", this.elementPath(null, { relative: true, positive: true }));
    },
    clipPath: function(element = null, options = {}) {
      element = element || this.targetElement;
      options = {
        radius: 24,
        margin: 10,
        offset: { x: 0, y: 0 },
        relative: false,
        ...options
      };
      return `${this.windowPath()} ${this.elementPath(element, options)}`.trim();
    },
    windowPath: function() {
      let path = "M 0 0 ";
      path += "L 0 " + window.innerHeight + " ";
      path += "L " + window.innerWidth + " " + window.innerHeight + " ";
      path += "L " + window.innerWidth + " 0 ";
      path += "L 0 0 ";
      return path.trim();
    },
    findElement: function(name) {
      return document.querySelector(selector.replace(/\./g, "\\$&")) ?? document.querySelector(selector);
    },
    elementPath: function(element = null, options = {}) {
      element = element || this.targetElement;
      options = {
        radius: 24,
        margin: 10,
        offset: { x: 0, y: 0 },
        ...options
      };
      const rect = this.elementRect(element, {
        relative: false,
        ...options
      });
      let path = "";
      path += "M " + rect[0].x + " " + (rect[0].y + options.radius) + " ";
      path += "C " + rect[0].x + " " + rect[0].y + " " + rect[0].x + " " + rect[0].y + " " + (rect[0].x + options.radius) + " " + rect[0].y + " ";
      path += "L " + (rect[1].x - options.radius) + " " + rect[1].y + " ";
      path += "C " + rect[1].x + " " + rect[1].y + " " + rect[1].x + " " + rect[1].y + " " + rect[1].x + " " + (rect[1].y + options.radius) + " ";
      path += "L " + rect[2].x + " " + (rect[2].y - options.radius) + " ";
      path += "C " + rect[2].x + " " + rect[2].y + " " + rect[2].x + " " + rect[2].y + " " + (rect[2].x - options.radius) + " " + rect[2].y + " ";
      path += "L " + (rect[3].x + options.radius) + " " + rect[3].y + " ";
      path += "C " + rect[3].x + " " + rect[3].y + " " + rect[3].x + " " + rect[3].y + " " + rect[3].x + " " + (rect[3].y - options.radius) + " ";
      path += "L " + rect[0].x + " " + (rect[0].y + options.radius) + " ";
      return path.trim();
    },
    elementRect: function(element = null, options = {}) {
      element = element || this.targetElement;
      const bounds = element.getBoundingClientRect();
      console.log("bounds", bounds.left, bounds.top);
      options = {
        radius: 24,
        margin: 10,
        offset: { x: 0, y: 0 },
        relative: false,
        ...options
      };
      const left = options.relative ? 0 : bounds.left;
      const top = options.relative ? 0 : bounds.top;
      let result = [
        {
          x: left - options.margin + options.offset.x,
          y: top - options.margin + options.offset.y
        },
        {
          x: left + element.clientWidth + options.margin + options.offset.x,
          y: top - options.margin + options.offset.y
        },
        {
          x: left + element.clientWidth + options.margin + options.offset.x,
          y: top + element.clientHeight + options.margin + options.offset.y
        },
        {
          x: left - options.margin + options.offset.x,
          y: top + element.clientHeight + options.margin + options.offset.y
        }
      ];
      if (options.positive) {
        let minX = 0;
        let minY = 0;
        for (let i = 0; i < result.length; i++) {
          if (result[i].x < minX) {
            minX = result[i].x;
          }
          if (result[i].y < minY) {
            minY = result[i].y;
          }
        }
        for (let i = 0; i < result.length; i++) {
          result[i].x -= minX;
          result[i].y -= minY;
        }
      }
      return result;
    }
  };
}
export {
  stepComponent as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vY29tcG9uZW50cy9zdGVwLmpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvLyBJbXBvcnQgYW55IGV4dGVybmFsIEphdmFTY3JpcHQgbGlicmFyaWVzIGZyb20gTlBNIGhlcmUuXG4vLyBpbXBvcnQgTW91c2V0cmFwIGZyb20gJ21vdXNldHJhcCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN0ZXBDb21wb25lbnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlc0FjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRhcmdldEVsZW1lbnQ6IG51bGwsXG4gICAgICAgIC8vIFlvdSBjYW4gZGVmaW5lIGFueSBvdGhlciBBbHBpbmUuanMgcHJvcGVydGllcyBoZXJlLlxuXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0RWxlbWVudCA9IHRoaXMuZmluZEVsZW1lbnQoa2V5KTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbml0aWFsaXplJyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3RoaXMuJGVsJywgdGhpcy4kZWwpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpYWxvZyA9IHRoaXMuJHJvb3QucXVlcnlTZWxlY3RvcignW2RhdGEtZGlhbG9nXScpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkaWFsb2dvcycsIGRpYWxvZyk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2xpcFBhdGggPSB0aGlzLiRyb290LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNsaXAtcGF0aF0nKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY2xpcFBhdGgnLCBjbGlwUGF0aCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlcXVpcmVzQWN0aW9uJywgcmVxdWlyZXNBY3Rpb24pO1xuXG4gICAgICAgICAgICAgICAgaWYgKHJlcXVpcmVzQWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJyR3aXJlJywgdGhpcy4kd2lyZS5uZXh0VHV0b3JpYWxTdGVwKCkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldEVsZW1lbnQuYmx1cigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVzY2VuZGFudHMgPSB0aGlzLnRhcmdldEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIjpob3ZlclwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZXNjZW5kYW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlc2NlbmRhbnQgPSBkZXNjZW5kYW50c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjZW5kYW50LmJsdXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplRGlhbG9nKCk7XG4gICAgICAgICAgICAgICAgLy8gY2xpcFBhdGguc2V0QXR0cmlidXRlKCdkJywgdGhpcy5jbGlwUGF0aCgpKTtcblxuICAgICAgICAgICAgfSwgMSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIFlvdSBjYW4gZGVmaW5lIGFueSBvdGhlciBBbHBpbmUuanMgZnVuY3Rpb25zIGhlcmUuXG5cbiAgICAgICAgaW5pdGlhbGl6ZURpYWxvZzogZnVuY3Rpb24gKGRpYWxvZyA9IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghZGlhbG9nKSB7XG4gICAgICAgICAgICAgICAgZGlhbG9nID0gdGhpcy4kcm9vdC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1kaWFsb2ddJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBkaWFsb2dQYXRoID0gZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWRpYWxvZy1wYXRoXScpO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaW5pdGlhbGl6ZURpYWxvZycpO1xuICAgICAgICAgICAgY29uc3QgcmVjdCA9IHRoaXMuZWxlbWVudFJlY3QoKTtcbiAgICAgICAgICAgIC8vIGNvbnN0IGhlYWRlciA9IGRpYWxvZy5xdWVyeVNlbGVjdG9yKCdbZGF0YS1kaWFsb2ctaGVhZGVyXScpO1xuICAgICAgICAgICAgY29uc3Qgc3Ryb2tlID0gZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWRpYWxvZy1zdHJva2VdJyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gcmVjdFsxXS54IC0gcmVjdFswXS54O1xuICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gcmVjdFsyXS55IC0gcmVjdFswXS55O1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0lNUE9SVEFOVCBIRVJFJyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnd2lkdGgnLCB3aWR0aCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaGVpZ2h0JywgaGVpZ2h0KTtcbiAgICAgICAgICAgIC8vIHZhciB5MSA9IGhlYWRlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG4gICAgICAgICAgICAvLyB2YXIgeTIgPSBzdHJva2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuXG4gICAgICAgICAgICAvLyB2YXIgZGlzdGFuY2UgPSB5MiAtIHkxO1xuXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZGlzdGFuY2UnLCBkaXN0YW5jZSwgeTIsIHkxKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZWN0JywgcmVjdCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHggPSByZWN0WzBdLng7XG4gICAgICAgICAgICBjb25zdCB5ID0gcmVjdFswXS55O1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3gnLCB4KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd5JywgeSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZGlhbG9nJywgZGlhbG9nKTtcbiAgICAgICAgICAgIC8vIGRpYWxvZyA9IHRoaXMuJHJvb3QucXVlcnlTZWxlY3RvcignW2RhdGEtZGlhbG9nXScpO1xuICAgICAgICAgICAgZGlhbG9nLnN0eWxlLndpZHRoID0gYCR7d2lkdGh9cHhgO1xuICAgICAgICAgICAgZGlhbG9nLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHt4fXB4LCAke3l9cHgpYDtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdEZWxheWVkIGRpYWxvZycsIGRpYWxvZyk7XG5cbiAgICAgICAgICAgIC8vIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWRpYWxvZ10nKS5mb3JFYWNoKChkaWFsb2cpID0+IHtcbiAgICAgICAgICAgIC8vICAgIGRpYWxvZy5yZW1vdmUoKTtcbiAgICAgICAgICAgIC8vIH0pO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3NlbGYuJHJvb3QnLCBzZWxmLiRyb290KTtcbiAgICAgICAgICAgIC8vIHNlbGYuJHJvb3QuYXBwZW5kQ2hpbGQoZGlhbG9nKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb21ldGhpbmcnKSk7XG4gICAgICAgICAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc29tZXRoaW5nJykuYXBwZW5kQ2hpbGQoZGlhbG9nKTtcbiAgICAgICAgICAgIC8vIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGlhbG9nKTtcbiAgICAgICAgICAgIC8vIH0sIDEwMDApO1xuICAgICAgICAgICAgc3Ryb2tlLnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH1weGA7XG5cbiAgICAgICAgICAgIGRpYWxvZ1BhdGguc2V0QXR0cmlidXRlKCdkJywgdGhpcy5lbGVtZW50UGF0aChudWxsLCB7cmVsYXRpdmU6IHRydWUsIHBvc2l0aXZlOiB0cnVlfSkpXG4gICAgICAgIH0sXG5cbiAgICAgICAgY2xpcFBhdGg6IGZ1bmN0aW9uIChlbGVtZW50ID0gbnVsbCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudCB8fCB0aGlzLnRhcmdldEVsZW1lbnQ7XG4gICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHJhZGl1czogMjQsXG4gICAgICAgICAgICAgICAgbWFyZ2luOiAxMCxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IHt4OiAwLCB5OiAwfSxcbiAgICAgICAgICAgICAgICByZWxhdGl2ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMud2luZG93UGF0aCgpfSAke3RoaXMuZWxlbWVudFBhdGgoZWxlbWVudCwgb3B0aW9ucyl9YC50cmltKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgd2luZG93UGF0aDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gVE9ETzogYWRkIG9wdGlvbiB0byBzZWxlY3QgY2xvY2t3aXNlIC9jb3VudGVyIGNsb2Nrd2lzZVxuICAgICAgICAgICAgLy9NIDAgOCBDIDAgMCAwIDAgOCAwIEwgMzggMCBDIDQ2IDAgNDYgMCA0NiA4IEMgNDYgMTYgNDYgMTYgMzggMTYgTCA4IDE2IEMgMCAxNiAwIDE2IDAgOFxuICAgICAgICAgICAgbGV0IHBhdGggPSAnTSAwIDAgJztcbiAgICAgICAgICAgIHBhdGggKz0gJ0wgMCAnICsgd2luZG93LmlubmVySGVpZ2h0ICsgJyAnO1xuICAgICAgICAgICAgcGF0aCArPSAnTCAnICsgd2luZG93LmlubmVyV2lkdGggKyAnICcgKyB3aW5kb3cuaW5uZXJIZWlnaHQgKyAnICc7XG4gICAgICAgICAgICBwYXRoICs9ICdMICcgKyB3aW5kb3cuaW5uZXJXaWR0aCArICcgMCAnO1xuICAgICAgICAgICAgcGF0aCArPSAnTCAwIDAgJztcblxuICAgICAgICAgICAgcmV0dXJuIHBhdGgudHJpbSgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGZpbmRFbGVtZW50OiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IucmVwbGFjZSgvXFwuL2csICdcXFxcJCYnKSlcbiAgICAgICAgICAgICAgICA/PyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgfSxcblxuICAgICAgICBlbGVtZW50UGF0aDogZnVuY3Rpb24gKGVsZW1lbnQgPSBudWxsLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50IHx8IHRoaXMudGFyZ2V0RWxlbWVudDtcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgcmFkaXVzOiAyNCxcbiAgICAgICAgICAgICAgICBtYXJnaW46IDEwLFxuICAgICAgICAgICAgICAgIG9mZnNldDoge3g6IDAsIHk6IDB9LFxuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLmVsZW1lbnRSZWN0KGVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICByZWxhdGl2ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsZXQgcGF0aCA9ICcnO1xuICAgICAgICAgICAgcGF0aCArPSAnTSAnICsgcmVjdFswXS54ICsgJyAnICsgKHJlY3RbMF0ueSArIG9wdGlvbnMucmFkaXVzKSArICcgJztcbiAgICAgICAgICAgIHBhdGggKz0gJ0MgJyArIHJlY3RbMF0ueCArICcgJyArIHJlY3RbMF0ueSArICcgJyArIHJlY3RbMF0ueCArICcgJyArIHJlY3RbMF0ueSArICcgJyArIChyZWN0WzBdLnggKyBvcHRpb25zLnJhZGl1cykgKyAnICcgKyByZWN0WzBdLnkgKyAnICc7XG4gICAgICAgICAgICBwYXRoICs9ICdMICcgKyAocmVjdFsxXS54IC0gb3B0aW9ucy5yYWRpdXMpICsgJyAnICsgcmVjdFsxXS55ICsgJyAnO1xuICAgICAgICAgICAgcGF0aCArPSAnQyAnICsgcmVjdFsxXS54ICsgJyAnICsgcmVjdFsxXS55ICsgJyAnICsgcmVjdFsxXS54ICsgJyAnICsgcmVjdFsxXS55ICsgJyAnICsgcmVjdFsxXS54ICsgJyAnICsgKHJlY3RbMV0ueSArIG9wdGlvbnMucmFkaXVzKSArICcgJztcbiAgICAgICAgICAgIHBhdGggKz0gJ0wgJyArIHJlY3RbMl0ueCArICcgJyArIChyZWN0WzJdLnkgLSBvcHRpb25zLnJhZGl1cykgKyAnICc7XG4gICAgICAgICAgICBwYXRoICs9ICdDICcgKyByZWN0WzJdLnggKyAnICcgKyByZWN0WzJdLnkgKyAnICcgKyByZWN0WzJdLnggKyAnICcgKyByZWN0WzJdLnkgKyAnICcgKyAocmVjdFsyXS54IC0gb3B0aW9ucy5yYWRpdXMpICsgJyAnICsgcmVjdFsyXS55ICsgJyAnO1xuICAgICAgICAgICAgcGF0aCArPSAnTCAnICsgKHJlY3RbM10ueCArIG9wdGlvbnMucmFkaXVzKSArICcgJyArIHJlY3RbM10ueSArICcgJztcbiAgICAgICAgICAgIHBhdGggKz0gJ0MgJyArIHJlY3RbM10ueCArICcgJyArIHJlY3RbM10ueSArICcgJyArIHJlY3RbM10ueCArICcgJyArIHJlY3RbM10ueSArICcgJyArIHJlY3RbM10ueCArICcgJyArIChyZWN0WzNdLnkgLSBvcHRpb25zLnJhZGl1cykgKyAnICc7XG4gICAgICAgICAgICAvLyBwYXRoICs9ICdaJztcbiAgICAgICAgICAgIHBhdGggKz0gJ0wgJyArIHJlY3RbMF0ueCArICcgJyArIChyZWN0WzBdLnkgKyBvcHRpb25zLnJhZGl1cykgKyAnICc7XG5cbiAgICAgICAgICAgIHJldHVybiBwYXRoLnRyaW0oKTtcbiAgICAgICAgfSxcblxuICAgICAgICBlbGVtZW50UmVjdDogZnVuY3Rpb24gKGVsZW1lbnQgPSBudWxsLCBvcHRpb25zID0ge30pIHtcblxuICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQgfHwgdGhpcy50YXJnZXRFbGVtZW50O1xuICAgICAgICAgICAgY29uc3QgYm91bmRzID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdib3VuZHMnLCBib3VuZHMubGVmdCwgYm91bmRzLnRvcCk7XG4gICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHJhZGl1czogMjQsXG4gICAgICAgICAgICAgICAgbWFyZ2luOiAxMCxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IHt4OiAwLCB5OiAwfSxcbiAgICAgICAgICAgICAgICByZWxhdGl2ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbGVmdCA9IG9wdGlvbnMucmVsYXRpdmUgPyAwIDogYm91bmRzLmxlZnQ7XG4gICAgICAgICAgICBjb25zdCB0b3AgPSBvcHRpb25zLnJlbGF0aXZlID8gMCA6IGJvdW5kcy50b3A7XG5cbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB4OiBsZWZ0IC0gb3B0aW9ucy5tYXJnaW4gKyBvcHRpb25zLm9mZnNldC54LFxuICAgICAgICAgICAgICAgICAgICB5OiB0b3AgLSBvcHRpb25zLm1hcmdpbiArIG9wdGlvbnMub2Zmc2V0LnlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgeDogbGVmdCArIGVsZW1lbnQuY2xpZW50V2lkdGggKyBvcHRpb25zLm1hcmdpbiArIG9wdGlvbnMub2Zmc2V0LngsXG4gICAgICAgICAgICAgICAgICAgIHk6IHRvcCAtIG9wdGlvbnMubWFyZ2luICsgb3B0aW9ucy5vZmZzZXQueVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB4OiBsZWZ0ICsgZWxlbWVudC5jbGllbnRXaWR0aCArIG9wdGlvbnMubWFyZ2luICsgb3B0aW9ucy5vZmZzZXQueCxcbiAgICAgICAgICAgICAgICAgICAgeTogdG9wICsgZWxlbWVudC5jbGllbnRIZWlnaHQgKyBvcHRpb25zLm1hcmdpbiArIG9wdGlvbnMub2Zmc2V0LnlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgeDogbGVmdCAtIG9wdGlvbnMubWFyZ2luICsgb3B0aW9ucy5vZmZzZXQueCxcbiAgICAgICAgICAgICAgICAgICAgeTogdG9wICsgZWxlbWVudC5jbGllbnRIZWlnaHQgKyBvcHRpb25zLm1hcmdpbiArIG9wdGlvbnMub2Zmc2V0LnlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5wb3NpdGl2ZSkge1xuICAgICAgICAgICAgICAgIGxldCBtaW5YID0gMDtcbiAgICAgICAgICAgICAgICBsZXQgbWluWSA9IDA7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0W2ldLnggPCBtaW5YKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5YID0gcmVzdWx0W2ldLng7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0W2ldLnkgPCBtaW5ZKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5ZID0gcmVzdWx0W2ldLnk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbaV0ueCAtPSBtaW5YO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbaV0ueSAtPSBtaW5ZO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgIH1cbn0iXSwKICAibWFwcGluZ3MiOiAiO0FBR2UsU0FBUixjQUErQjtBQUFBLEVBQ0k7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUNKLEdBQUc7QUFDckMsU0FBTztBQUFBLElBQ0gsZUFBZTtBQUFBO0FBQUEsSUFHZixZQUFZLFdBQVk7QUFDcEIsV0FBSyxnQkFBZ0IsS0FBSyxZQUFZLEdBQUc7QUFDekMsaUJBQVcsTUFBTTtBQUNiLGdCQUFRLElBQUksWUFBWTtBQUN4QixnQkFBUSxJQUFJLFlBQVksS0FBSyxHQUFHO0FBQ2hDLGNBQU0sU0FBUyxLQUFLLE1BQU0sY0FBYyxlQUFlO0FBQ3ZELGdCQUFRLElBQUksWUFBWSxNQUFN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
