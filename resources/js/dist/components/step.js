// resources/js/components/step.js
function stepComponent({
  key,
  selector,
  requiresAction
}) {
  return {
    targetElement: null,
    scrollTimeout: null,
    // You can define any other Alpine.js properties here.
    initialize: function() {
      this.targetElement = this.findElement(key);
      this.configure();
      console.log("initialize");
      console.log("this.$el", this.$el);
      const dialog = this.$root.querySelector("[data-dialog]");
      console.log("dialogos", dialog);
      const clipPath = this.$root.querySelector("[data-clip-path]");
      console.log("clipPath", clipPath);
      console.log("requiresAction", requiresAction);
      if (requiresAction) {
        this.targetElement.addEventListener("click", (event) => {
          event.preventDefault();
          console.log("$wire", this.$wire.nextTutorialStep());
          this.targetElement.blur();
          const descendants = this.targetElement.querySelectorAll(":hover");
          for (let i = 0; i < descendants.length; i++) {
            const descendant = descendants[i];
            descendant.blur();
          }
        });
      }
      this.initializeDialog();
      this.$nextTick(() => {
        clipPath.setAttribute("d", this.clipPath());
        this.$dispatch("tutorial::render");
      });
      clipPath.setAttribute("d", this.clipPath());
    },
    timeouts: [],
    configure: function() {
      console.log("configure");
      console.log(this.targetElement.tagName);
      if (this.targetElement instanceof HTMLSelectElement) {
        if (this.targetElement.hasAttribute("data-choice")) {
          this.targetElement = this.targetElement.parentElement.parentElement;
          const dropdown = this.targetElement.querySelector(".choices__list.choices__list--dropdown");
          dropdown.style.zIndex = 100;
        }
      }
      if (this.targetElement.tagName === "TRIX-EDITOR") {
        this.timeouts["trix"] = this.targetElement.clientHeight;
        this.targetElement = this.targetElement.parentElement;
        console.log("is trix");
        const observer = new MutationObserver((mutationsList, observer2) => {
          console.log("resized");
          mutationsList.forEach((mutation) => {
            console.log("mutation", mutation);
            if (this.timeouts["trix"]) {
              clearTimeout(this.timeouts["trix"]);
            }
            this.timeouts["trix"] = setTimeout(() => {
              this.timeouts["trix"] = null;
              this.initialize();
            }, 500);
          });
        });
        const config = {
          attributes: true,
          attributeFilter: ["height"],
          childList: true,
          subtree: true
        };
        observer.observe(this.targetElement, config);
      }
      if (this.targetElement instanceof HTMLTextAreaElement || this.t) {
        console.log("is textarea");
        let initialWidth = this.targetElement.offsetWidth;
        let initialHeight = this.targetElement.offsetHeight;
        const observer = new MutationObserver(() => {
          if (this.targetElement.offsetWidth !== initialWidth || this.targetElement.offsetHeight !== initialHeight) {
            console.log("Textarea was resized.");
            initialWidth = this.targetElement.offsetWidth;
            initialHeight = this.targetElement.offsetHeight;
            if (this.timeouts["textarea"]) {
              clearTimeout(this.timeouts["textarea"]);
            }
            this.timeouts["textarea"] = setTimeout(() => {
              this.timeouts["textarea"] = null;
              this.initialize();
            }, 100);
          }
        });
        observer.observe(this.targetElement, { attributes: true, attributeFilter: ["style"] });
      }
    },
    // You can define any other Alpine.js functions here.
    initializeDialog: function(dialog = null) {
      if (!dialog) {
        dialog = this.$root.querySelector("[data-dialog]");
      }
      const dialogPath = dialog.querySelector("[data-dialog-path]");
      console.log("initializeDialog");
      const rect = this.elementRect();
      const stroke = dialog.querySelector("[data-dialog-stroke]");
      window.scrollTo({
        top: rect[0].y - window.innerHeight / 3,
        left: rect[0].x,
        behavior: "smooth"
      });
      const width = rect[1].x - rect[0].x;
      const height = rect[2].y - rect[0].y;
      console.log("IMPORTANT HERE");
      console.log("width", width);
      console.log("height", height);
      console.log("rect", rect);
      const x = rect[0].x;
      const y = rect[0].y;
      console.log("x", x);
      console.log("y", y);
      console.log("dialog", dialog);
      dialog.style.width = `${width}px`;
      dialog.style.transform = `translate(${x}px, ${y}px)`;
      stroke.style.height = `${height}px`;
      dialogPath.setAttribute("d", this.elementPath(null, { relative: true, positive: true }));
    },
    clipPath: function(element = null, options = {}) {
      element = element || this.targetElement;
      options = {
        radius: 24,
        margin: 10,
        offset: { x: 0, y: 0 },
        relative: false,
        ...options
      };
      return `${this.windowPath()} ${this.elementPath(element, options)}`.trim();
    },
    windowPath: function() {
      const documentHeight = Math.max(
        document.documentElement.clientHeight,
        document.documentElement.scrollHeight,
        document.documentElement.offsetHeight
      );
      let path = "M 0 0 ";
      path += "L 0 " + documentHeight + " ";
      path += "L " + window.innerWidth + " " + documentHeight + " ";
      path += "L " + window.innerWidth + " 0 ";
      path += "L 0 0 ";
      return path.trim();
    },
    findElement: function(name) {
      return document.querySelector(selector.replace(/\./g, "\\$&")) ?? document.querySelector(selector);
    },
    elementPath: function(element = null, options = {}) {
      element = element || this.targetElement;
      options = {
        radius: 24,
        margin: 10,
        offset: { x: 0, y: 0 },
        ...options
      };
      const rect = this.elementRect(element, {
        relative: false,
        ...options
      });
      let path = "";
      path += "M " + rect[0].x + " " + (rect[0].y + options.radius) + " ";
      path += "C " + rect[0].x + " " + rect[0].y + " " + rect[0].x + " " + rect[0].y + " " + (rect[0].x + options.radius) + " " + rect[0].y + " ";
      path += "L " + (rect[1].x - options.radius) + " " + rect[1].y + " ";
      path += "C " + rect[1].x + " " + rect[1].y + " " + rect[1].x + " " + rect[1].y + " " + rect[1].x + " " + (rect[1].y + options.radius) + " ";
      path += "L " + rect[2].x + " " + (rect[2].y - options.radius) + " ";
      path += "C " + rect[2].x + " " + rect[2].y + " " + rect[2].x + " " + rect[2].y + " " + (rect[2].x - options.radius) + " " + rect[2].y + " ";
      path += "L " + (rect[3].x + options.radius) + " " + rect[3].y + " ";
      path += "C " + rect[3].x + " " + rect[3].y + " " + rect[3].x + " " + rect[3].y + " " + rect[3].x + " " + (rect[3].y - options.radius) + " ";
      path += "L " + rect[0].x + " " + (rect[0].y + options.radius) + " ";
      return path.trim();
    },
    elementRect: function(element = null, options = {}) {
      element = element || this.targetElement;
      const bounds = element.getBoundingClientRect();
      console.log("bounds", bounds.left, bounds.top);
      console.log("offset", element.offsetLeft, element.offsetTop);
      options = {
        radius: 24,
        margin: 10,
        offset: { x: 0, y: 0 },
        relative: false,
        ...options
      };
      const left = options.relative ? 0 : bounds.left;
      const top = options.relative ? 0 : element.offsetTop;
      console.log("left/top", left, top);
      let result = [
        {
          x: left - options.margin + options.offset.x,
          y: top - options.margin + options.offset.y
        },
        {
          x: left + element.clientWidth + options.margin + options.offset.x,
          y: top - options.margin + options.offset.y
        },
        {
          x: left + element.clientWidth + options.margin + options.offset.x,
          y: top + element.clientHeight + options.margin + options.offset.y
        },
        {
          x: left - options.margin + options.offset.x,
          y: top + element.clientHeight + options.margin + options.offset.y
        }
      ];
      if (options.positive) {
        let minX = 0;
        let minY = 0;
        for (let i = 0; i < result.length; i++) {
          if (result[i].x < minX) {
            minX = result[i].x;
          }
          if (result[i].y < minY) {
            minY = result[i].y;
          }
        }
        for (let i = 0; i < result.length; i++) {
          result[i].x -= minX;
          result[i].y -= minY;
        }
      }
      return result;
    }
  };
}
export {
  stepComponent as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vY29tcG9uZW50cy9zdGVwLmpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvLyBJbXBvcnQgYW55IGV4dGVybmFsIEphdmFTY3JpcHQgbGlicmFyaWVzIGZyb20gTlBNIGhlcmUuXG4vLyBpbXBvcnQgTW91c2V0cmFwIGZyb20gJ21vdXNldHJhcCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN0ZXBDb21wb25lbnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlc0FjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRhcmdldEVsZW1lbnQ6IG51bGwsXG4gICAgICAgIHNjcm9sbFRpbWVvdXQ6IG51bGwsXG4gICAgICAgIC8vIFlvdSBjYW4gZGVmaW5lIGFueSBvdGhlciBBbHBpbmUuanMgcHJvcGVydGllcyBoZXJlLlxuXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyAgICAgaWYgKHRoaXMuc2Nyb2xsVGltZW91dCkge1xuICAgICAgICAgICAgLy8gICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zY3JvbGxUaW1lb3V0KTtcbiAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gICAgIHRoaXMuc2Nyb2xsVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgIC8vICAgICB9LCAxMDApO1xuICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgICB0aGlzLnRhcmdldEVsZW1lbnQgPSB0aGlzLmZpbmRFbGVtZW50KGtleSk7XG5cbiAgICAgICAgICAgIHRoaXMuY29uZmlndXJlKCk7XG5cbiAgICAgICAgICAgIC8vIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2luaXRpYWxpemUnKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0aGlzLiRlbCcsIHRoaXMuJGVsKTtcbiAgICAgICAgICAgIGNvbnN0IGRpYWxvZyA9IHRoaXMuJHJvb3QucXVlcnlTZWxlY3RvcignW2RhdGEtZGlhbG9nXScpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2RpYWxvZ29zJywgZGlhbG9nKTtcbiAgICAgICAgICAgIGNvbnN0IGNsaXBQYXRoID0gdGhpcy4kcm9vdC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jbGlwLXBhdGhdJyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY2xpcFBhdGgnLCBjbGlwUGF0aCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygncmVxdWlyZXNBY3Rpb24nLCByZXF1aXJlc0FjdGlvbik7XG5cbiAgICAgICAgICAgIGlmIChyZXF1aXJlc0FjdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJyR3aXJlJywgdGhpcy4kd2lyZS5uZXh0VHV0b3JpYWxTdGVwKCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0RWxlbWVudC5ibHVyKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlc2NlbmRhbnRzID0gdGhpcy50YXJnZXRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCI6aG92ZXJcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZXNjZW5kYW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVzY2VuZGFudCA9IGRlc2NlbmRhbnRzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY2VuZGFudC5ibHVyKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplRGlhbG9nKCk7XG5cbiAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjbGlwUGF0aC5zZXRBdHRyaWJ1dGUoJ2QnLCB0aGlzLmNsaXBQYXRoKCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuJGRpc3BhdGNoKCd0dXRvcmlhbDo6cmVuZGVyJyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY2xpcFBhdGguc2V0QXR0cmlidXRlKCdkJywgdGhpcy5jbGlwUGF0aCgpKTtcbiAgICAgICAgICAgIC8vIH0sIDEpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHRpbWVvdXRzOiBbXSxcblxuICAgICAgICBjb25maWd1cmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjb25maWd1cmUnKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMudGFyZ2V0RWxlbWVudC50YWdOYW1lKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0RWxlbWVudCBpbnN0YW5jZW9mIEhUTUxTZWxlY3RFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0RWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2RhdGEtY2hvaWNlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXRFbGVtZW50ID0gdGhpcy50YXJnZXRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZHJvcGRvd24gPSB0aGlzLnRhcmdldEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNob2ljZXNfX2xpc3QuY2hvaWNlc19fbGlzdC0tZHJvcGRvd24nKTtcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uc3R5bGUuekluZGV4ID0gMTAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0RWxlbWVudC50YWdOYW1lID09PSAnVFJJWC1FRElUT1InKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aW1lb3V0c1sndHJpeCddID0gdGhpcy50YXJnZXRFbGVtZW50LmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgICAgICB0aGlzLnRhcmdldEVsZW1lbnQgPSB0aGlzLnRhcmdldEVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaXMgdHJpeCcpO1xuXG5cbiAgICAgICAgICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnNMaXN0LCBvYnNlcnZlcikgPT4ge1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXNpemVkJyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgICAgICAgICAgICBtdXRhdGlvbnNMaXN0LmZvckVhY2goKG11dGF0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbXV0YXRpb24nLCBtdXRhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsZXQgaGVpZ2h0ID0gbXV0YXRpb24udGFyZ2V0LmNsaWVudEhlaWdodDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgKGhlaWdodCAhPSB0aGlzLnRpbWVvdXRzWyd0cml4LWhlaWdodCddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy50aW1lb3V0c1sndHJpeC1oZWlnaHQnXSA9IGhlaWdodDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGltZW91dHNbJ3RyaXgnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRzWyd0cml4J10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWVvdXRzWyd0cml4J10gPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWVvdXRzWyd0cml4J10gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGlmIChtdXRhdGlvbi50eXBlID09PSAnYXR0cmlidXRlcycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgaWYgKG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPT09ICd3aWR0aCcgfHwgbXV0YXRpb24uYXR0cmlidXRlTmFtZSA9PT0gJ2hlaWdodCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IG11dGF0aW9uLnRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNvbnN0IG5ld1dpZHRoID0gdGFyZ2V0Lm9mZnNldFdpZHRoOyAvLyBvciB0YXJnZXQuc3R5bGUud2lkdGhcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNvbnN0IG5ld0hlaWdodCA9IHRhcmdldC5vZmZzZXRIZWlnaHQ7IC8vIG9yIHRhcmdldC5zdHlsZS5oZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBjb25zb2xlLmxvZyhgV2lkdGggY2hhbmdlZCB0bzogJHtuZXdXaWR0aH1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBIZWlnaHQgY2hhbmdlZCB0bzogJHtuZXdIZWlnaHR9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVGaWx0ZXI6IFsnaGVpZ2h0J10sXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc3VidHJlZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnRhcmdldEVsZW1lbnQsIGNvbmZpZyk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0RWxlbWVudCBpbnN0YW5jZW9mIEhUTUxUZXh0QXJlYUVsZW1lbnQgfHwgdGhpcy50KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2lzIHRleHRhcmVhJyk7XG4gICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBpbml0aWFsIHNpemUgb2YgdGhlIHRleHRhcmVhXG4gICAgICAgICAgICAgICAgbGV0IGluaXRpYWxXaWR0aCA9IHRoaXMudGFyZ2V0RWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICBsZXQgaW5pdGlhbEhlaWdodCA9IHRoaXMudGFyZ2V0RWxlbWVudC5vZmZzZXRIZWlnaHQ7XG5cbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBNdXRhdGlvbk9ic2VydmVyIHRvIG1vbml0b3Igc2l6ZSBjaGFuZ2VzXG4gICAgICAgICAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldEVsZW1lbnQub2Zmc2V0V2lkdGggIT09IGluaXRpYWxXaWR0aCB8fCB0aGlzLnRhcmdldEVsZW1lbnQub2Zmc2V0SGVpZ2h0ICE9PSBpbml0aWFsSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVGV4dGFyZWEgd2FzIHJlc2l6ZWQuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsV2lkdGggPSB0aGlzLnRhcmdldEVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsSGVpZ2h0ID0gdGhpcy50YXJnZXRFbGVtZW50Lm9mZnNldEhlaWdodDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGltZW91dHNbJ3RleHRhcmVhJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0c1sndGV4dGFyZWEnXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGltZW91dHNbJ3RleHRhcmVhJ10gPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWVvdXRzWyd0ZXh0YXJlYSddID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIFN0YXJ0IG9ic2VydmluZyBjaGFuZ2VzIGluIHRoZSB0ZXh0YXJlYSBlbGVtZW50XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnRhcmdldEVsZW1lbnQsIHthdHRyaWJ1dGVzOiB0cnVlLCBhdHRyaWJ1dGVGaWx0ZXI6IFsnc3R5bGUnXX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAvLyBZb3UgY2FuIGRlZmluZSBhbnkgb3RoZXIgQWxwaW5lLmpzIGZ1bmN0aW9ucyBoZXJlLlxuXG4gICAgICAgIGluaXRpYWxpemVEaWFsb2c6IGZ1bmN0aW9uIChkaWFsb2cgPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoIWRpYWxvZykge1xuICAgICAgICAgICAgICAgIGRpYWxvZyA9IHRoaXMuJHJvb3QucXVlcnlTZWxlY3RvcignW2RhdGEtZGlhbG9nXScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZGlhbG9nUGF0aCA9IGRpYWxvZy5xdWVyeVNlbGVjdG9yKCdbZGF0YS1kaWFsb2ctcGF0aF0nKTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2luaXRpYWxpemVEaWFsb2cnKTtcbiAgICAgICAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLmVsZW1lbnRSZWN0KCk7XG4gICAgICAgICAgICAvLyBjb25zdCBoZWFkZXIgPSBkaWFsb2cucXVlcnlTZWxlY3RvcignW2RhdGEtZGlhbG9nLWhlYWRlcl0nKTtcbiAgICAgICAgICAgIGNvbnN0IHN0cm9rZSA9IGRpYWxvZy5xdWVyeVNlbGVjdG9yKCdbZGF0YS1kaWFsb2ctc3Ryb2tlXScpO1xuXG4gICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oe1xuICAgICAgICAgICAgICAgIHRvcDogcmVjdFswXS55IC0gKHdpbmRvdy5pbm5lckhlaWdodCAvIDMpLFxuICAgICAgICAgICAgICAgIGxlZnQ6IHJlY3RbMF0ueCxcbiAgICAgICAgICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IHJlY3RbMV0ueCAtIHJlY3RbMF0ueDtcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IHJlY3RbMl0ueSAtIHJlY3RbMF0ueTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdJTVBPUlRBTlQgSEVSRScpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3dpZHRoJywgd2lkdGgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2hlaWdodCcsIGhlaWdodCk7XG4gICAgICAgICAgICAvLyB2YXIgeTEgPSBoZWFkZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgICAgICAgLy8gdmFyIHkyID0gc3Ryb2tlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcblxuICAgICAgICAgICAgLy8gdmFyIGRpc3RhbmNlID0geTIgLSB5MTtcblxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2Rpc3RhbmNlJywgZGlzdGFuY2UsIHkyLCB5MSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygncmVjdCcsIHJlY3QpO1xuXG4gICAgICAgICAgICBjb25zdCB4ID0gcmVjdFswXS54O1xuICAgICAgICAgICAgY29uc3QgeSA9IHJlY3RbMF0ueTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd4JywgeCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygneScsIHkpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2RpYWxvZycsIGRpYWxvZyk7XG4gICAgICAgICAgICAvLyBkaWFsb2cgPSB0aGlzLiRyb290LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWRpYWxvZ10nKTtcbiAgICAgICAgICAgIGRpYWxvZy5zdHlsZS53aWR0aCA9IGAke3dpZHRofXB4YDtcbiAgICAgICAgICAgIGRpYWxvZy5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7eH1weCwgJHt5fXB4KWA7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnRGVsYXllZCBkaWFsb2cnLCBkaWFsb2cpO1xuXG4gICAgICAgICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1kaWFsb2ddJykuZm9yRWFjaCgoZGlhbG9nKSA9PiB7XG4gICAgICAgICAgICAvLyAgICBkaWFsb2cucmVtb3ZlKCk7XG4gICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdzZWxmLiRyb290Jywgc2VsZi4kcm9vdCk7XG4gICAgICAgICAgICAvLyBzZWxmLiRyb290LmFwcGVuZENoaWxkKGRpYWxvZyk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc29tZXRoaW5nJykpO1xuICAgICAgICAgICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvbWV0aGluZycpLmFwcGVuZENoaWxkKGRpYWxvZyk7XG4gICAgICAgICAgICAvLyBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpYWxvZyk7XG4gICAgICAgICAgICAvLyB9LCAxMDAwKTtcbiAgICAgICAgICAgIHN0cm9rZS5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHR9cHhgO1xuXG4gICAgICAgICAgICBkaWFsb2dQYXRoLnNldEF0dHJpYnV0ZSgnZCcsIHRoaXMuZWxlbWVudFBhdGgobnVsbCwge3JlbGF0aXZlOiB0cnVlLCBwb3NpdGl2ZTogdHJ1ZX0pKVxuICAgICAgICB9LFxuXG4gICAgICAgIGNsaXBQYXRoOiBmdW5jdGlvbiAoZWxlbWVudCA9IG51bGwsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQgfHwgdGhpcy50YXJnZXRFbGVtZW50O1xuICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICByYWRpdXM6IDI0LFxuICAgICAgICAgICAgICAgIG1hcmdpbjogMTAsXG4gICAgICAgICAgICAgICAgb2Zmc2V0OiB7eDogMCwgeTogMH0sXG4gICAgICAgICAgICAgICAgcmVsYXRpdmU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLndpbmRvd1BhdGgoKX0gJHt0aGlzLmVsZW1lbnRQYXRoKGVsZW1lbnQsIG9wdGlvbnMpfWAudHJpbSgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHdpbmRvd1BhdGg6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGRvY3VtZW50SGVpZ2h0ID0gTWF0aC5tYXgoXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCxcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0LFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vZmZzZXRIZWlnaHQsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBUT0RPOiBhZGQgb3B0aW9uIHRvIHNlbGVjdCBjbG9ja3dpc2UgL2NvdW50ZXIgY2xvY2t3aXNlXG4gICAgICAgICAgICAvL00gMCA4IEMgMCAwIDAgMCA4IDAgTCAzOCAwIEMgNDYgMCA0NiAwIDQ2IDggQyA0NiAxNiA0NiAxNiAzOCAxNiBMIDggMTYgQyAwIDE2IDAgMTYgMCA4XG4gICAgICAgICAgICBsZXQgcGF0aCA9ICdNIDAgMCAnO1xuICAgICAgICAgICAgcGF0aCArPSAnTCAwICcgKyBkb2N1bWVudEhlaWdodCArICcgJztcbiAgICAgICAgICAgIHBhdGggKz0gJ0wgJyArIHdpbmRvdy5pbm5lcldpZHRoICsgJyAnICsgZG9jdW1lbnRIZWlnaHQgKyAnICc7XG4gICAgICAgICAgICBwYXRoICs9ICdMICcgKyB3aW5kb3cuaW5uZXJXaWR0aCArICcgMCAnO1xuICAgICAgICAgICAgcGF0aCArPSAnTCAwIDAgJztcblxuICAgICAgICAgICAgcmV0dXJuIHBhdGgudHJpbSgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGZpbmRFbGVtZW50OiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IucmVwbGFjZSgvXFwuL2csICdcXFxcJCYnKSlcbiAgICAgICAgICAgICAgICA/PyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgfSxcblxuICAgICAgICBlbGVtZW50UGF0aDogZnVuY3Rpb24gKGVsZW1lbnQgPSBudWxsLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50IHx8IHRoaXMudGFyZ2V0RWxlbWVudDtcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgcmFkaXVzOiAyNCxcbiAgICAgICAgICAgICAgICBtYXJnaW46IDEwLFxuICAgICAgICAgICAgICAgIG9mZnNldDoge3g6IDAsIHk6IDB9LFxuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLmVsZW1lbnRSZWN0KGVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICByZWxhdGl2ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsZXQgcGF0aCA9ICcnO1xuICAgICAgICAgICAgcGF0aCArPSAnTSAnICsgcmVjdFswXS54ICsgJyAnICsgKHJlY3RbMF0ueSArIG9wdGlvbnMucmFkaXVzKSArICcgJztcbiAgICAgICAgICAgIHBhdGggKz0gJ0MgJyArIHJlY3RbMF0ueCArICcgJyArIHJlY3RbMF0ueSArICcgJyArIHJlY3RbMF0ueCArICcgJyArIHJlY3RbMF0ueSArICcgJyArIChyZWN0WzBdLnggKyBvcHRpb25zLnJhZGl1cykgKyAnICcgKyByZWN0WzBdLnkgKyAnICc7XG4gICAgICAgICAgICBwYXRoICs9ICdMICcgKyAocmVjdFsxXS54IC0gb3B0aW9ucy5yYWRpdXMpICsgJyAnICsgcmVjdFsxXS55ICsgJyAnO1xuICAgICAgICAgICAgcGF0aCArPSAnQyAnICsgcmVjdFsxXS54ICsgJyAnICsgcmVjdFsxXS55ICsgJyAnICsgcmVjdFsxXS54ICsgJyAnICsgcmVjdFsxXS55ICsgJyAnICsgcmVjdFsxXS54ICsgJyAnICsgKHJlY3RbMV0ueSArIG9wdGlvbnMucmFkaXVzKSArICcgJztcbiAgICAgICAgICAgIHBhdGggKz0gJ0wgJyArIHJlY3RbMl0ueCArICcgJyArIChyZWN0WzJdLnkgLSBvcHRpb25zLnJhZGl1cykgKyAnICc7XG4gICAgICAgICAgICBwYXRoICs9ICdDICcgKyByZWN0WzJdLnggKyAnICcgKyByZWN0WzJdLnkgKyAnICcgKyByZWN0WzJdLnggKyAnICcgKyByZWN0WzJdLnkgKyAnICcgKyAocmVjdFsyXS54IC0gb3B0aW9ucy5yYWRpdXMpICsgJyAnICsgcmVjdFsyXS55ICsgJyAnO1xuICAgICAgICAgICAgcGF0aCArPSAnTCAnICsgKHJlY3RbM10ueCArIG9wdGlvbnMucmFkaXVzKSArICcgJyArIHJlY3RbM10ueSArICcgJztcbiAgICAgICAgICAgIHBhdGggKz0gJ0MgJyArIHJlY3RbM10ueCArICcgJyArIHJlY3RbM10ueSArICcgJyArIHJlY3RbM10ueCArICcgJyArIHJlY3RbM10ueSArICcgJyArIHJlY3RbM10ueCArICcgJyArIChyZWN0WzNdLnkgLSBvcHRpb25zLnJhZGl1cykgKyAnICc7XG4gICAgICAgICAgICAvLyBwYXRoICs9ICdaJztcbiAgICAgICAgICAgIHBhdGggKz0gJ0wgJyArIHJlY3RbMF0ueCArICcgJyArIChyZWN0WzBdLnkgKyBvcHRpb25zLnJhZGl1cykgKyAnICc7XG5cbiAgICAgICAgICAgIHJldHVybiBwYXRoLnRyaW0oKTtcbiAgICAgICAgfSxcblxuICAgICAgICBlbGVtZW50UmVjdDogZnVuY3Rpb24gKGVsZW1lbnQgPSBudWxsLCBvcHRpb25zID0ge30pIHtcblxuICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQgfHwgdGhpcy50YXJnZXRFbGVtZW50O1xuICAgICAgICAgICAgY29uc3QgYm91bmRzID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdib3VuZHMnLCBib3VuZHMubGVmdCwgYm91bmRzLnRvcCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnb2Zmc2V0JywgZWxlbWVudC5vZmZzZXRMZWZ0LCBlbGVtZW50Lm9mZnNldFRvcCk7XG4gICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHJhZGl1czogMjQsXG4gICAgICAgICAgICAgICAgbWFyZ2luOiAxMCxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IHt4OiAwLCB5OiAwfSxcbiAgICAgICAgICAgICAgICByZWxhdGl2ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbGVmdCA9IG9wdGlvbnMucmVsYXRpdmUgPyAwIDogYm91bmRzLmxlZnQ7XG4gICAgICAgICAgICBjb25zdCB0b3AgPSBvcHRpb25zLnJlbGF0aXZlID8gMCA6IGVsZW1lbnQub2Zmc2V0VG9wO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xlZnQvdG9wJywgbGVmdCwgdG9wKTtcblxuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHg6IGxlZnQgLSBvcHRpb25zLm1hcmdpbiArIG9wdGlvbnMub2Zmc2V0LngsXG4gICAgICAgICAgICAgICAgICAgIHk6IHRvcCAtIG9wdGlvbnMubWFyZ2luICsgb3B0aW9ucy5vZmZzZXQueVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB4OiBsZWZ0ICsgZWxlbWVudC5jbGllbnRXaWR0aCArIG9wdGlvbnMubWFyZ2luICsgb3B0aW9ucy5vZmZzZXQueCxcbiAgICAgICAgICAgICAgICAgICAgeTogdG9wIC0gb3B0aW9ucy5tYXJnaW4gKyBvcHRpb25zLm9mZnNldC55XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHg6IGxlZnQgKyBlbGVtZW50LmNsaWVudFdpZHRoICsgb3B0aW9ucy5tYXJnaW4gKyBvcHRpb25zLm9mZnNldC54LFxuICAgICAgICAgICAgICAgICAgICB5OiB0b3AgKyBlbGVtZW50LmNsaWVudEhlaWdodCArIG9wdGlvbnMubWFyZ2luICsgb3B0aW9ucy5vZmZzZXQueVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB4OiBsZWZ0IC0gb3B0aW9ucy5tYXJnaW4gKyBvcHRpb25zLm9mZnNldC54LFxuICAgICAgICAgICAgICAgICAgICB5OiB0b3AgKyBlbGVtZW50LmNsaWVudEhlaWdodCArIG9wdGlvbnMubWFyZ2luICsgb3B0aW9ucy5vZmZzZXQueVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnBvc2l0aXZlKSB7XG4gICAgICAgICAgICAgICAgbGV0IG1pblggPSAwO1xuICAgICAgICAgICAgICAgIGxldCBtaW5ZID0gMDtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbaV0ueCA8IG1pblgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pblggPSByZXN1bHRbaV0ueDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbaV0ueSA8IG1pblkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pblkgPSByZXN1bHRbaV0ueTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtpXS54IC09IG1pblg7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtpXS55IC09IG1pblk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgfVxufSJdLAogICJtYXBwaW5ncyI6ICI7QUFHZSxTQUFSLGNBQStCO0FBQUEsRUFDSTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0osR0FBRztBQUNyQyxTQUFPO0FBQUEsSUFDSCxlQUFlO0FBQUEsSUFDZixlQUFlO0FBQUE7QUFBQSxJQUdmLFlBQVksV0FBWTtBQVVwQixXQUFLLGdCQUFnQixLQUFLLFlBQVksR0FBRztBQUV6QyxXQUFLLFVBQVU7QUFHZixjQUFRLElBQUksWUFBWTtBQUN4QixjQUFRLElBQUksWUFBWSxLQUFLLEdBQUc7QUFDaEMsWUFBTSxTQUFTLEtBQUssTUFBTSxjQUFjLGVBQWU7QUFDdkQsY0FBUSxJQUFJLFlBQVksTUFBTTtBQUM5QixZQUFNLFdBQVcsS0FBSyxNQUFNLGNBQWMsa0JBQWtCO0FBQzVELGNBQVEsSUFBSSxZQUFZLFFBQVE7QUFDaEMsY0FBUSxJQUFJLGtCQUFrQixjQUFjO0FBRTVDLFVBQUks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
