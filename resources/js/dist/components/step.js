// resources/js/components/step.js
function stepComponent({
  key,
  selector,
  requiresAction
}) {
  return {
    targetElement: null,
    scrollTimeout: null,
    // You can define any other Alpine.js properties here.
    initialize: function() {
      this.targetElement = this.findElement(key);
      setTimeout(() => {
        console.log("initialize");
        console.log("this.$el", this.$el);
        const dialog = this.$root.querySelector("[data-dialog]");
        console.log("dialogos", dialog);
        const clipPath = this.$root.querySelector("[data-clip-path]");
        console.log("clipPath", clipPath);
        console.log("requiresAction", requiresAction);
        if (requiresAction) {
          this.targetElement.addEventListener("click", (event) => {
            event.preventDefault();
            console.log("$wire", this.$wire.nextTutorialStep());
            this.targetElement.blur();
            const descendants = this.targetElement.querySelectorAll(":hover");
            for (let i = 0; i < descendants.length; i++) {
              const descendant = descendants[i];
              descendant.blur();
            }
          });
        }
        this.initializeDialog();
        clipPath.setAttribute("d", this.clipPath());
      }, 1);
    },
    // You can define any other Alpine.js functions here.
    initializeDialog: function(dialog = null) {
      if (!dialog) {
        dialog = this.$root.querySelector("[data-dialog]");
      }
      const dialogPath = dialog.querySelector("[data-dialog-path]");
      console.log("initializeDialog");
      const rect = this.elementRect();
      const stroke = dialog.querySelector("[data-dialog-stroke]");
      window.scrollTo({
        top: rect[0].y - window.innerHeight / 3,
        left: rect[0].x,
        behavior: "smooth"
      });
      const width = rect[1].x - rect[0].x;
      const height = rect[2].y - rect[0].y;
      console.log("IMPORTANT HERE");
      console.log("width", width);
      console.log("height", height);
      console.log("rect", rect);
      const x = rect[0].x;
      const y = rect[0].y;
      console.log("x", x);
      console.log("y", y);
      console.log("dialog", dialog);
      dialog.style.width = `${width}px`;
      dialog.style.transform = `translate(${x}px, ${y}px)`;
      stroke.style.height = `${height}px`;
      dialogPath.setAttribute("d", this.elementPath(null, { relative: true, positive: true }));
    },
    clipPath: function(element = null, options = {}) {
      element = element || this.targetElement;
      options = {
        radius: 24,
        margin: 10,
        offset: { x: 0, y: 0 },
        relative: false,
        ...options
      };
      return `${this.windowPath()} ${this.elementPath(element, options)}`.trim();
    },
    windowPath: function() {
      const documentHeight = Math.max(
        document.documentElement.clientHeight,
        document.documentElement.scrollHeight,
        document.documentElement.offsetHeight
      );
      let path = "M 0 0 ";
      path += "L 0 " + documentHeight + " ";
      path += "L " + window.innerWidth + " " + documentHeight + " ";
      path += "L " + window.innerWidth + " 0 ";
      path += "L 0 0 ";
      return path.trim();
    },
    findElement: function(name) {
      return document.querySelector(selector.replace(/\./g, "\\$&")) ?? document.querySelector(selector);
    },
    elementPath: function(element = null, options = {}) {
      element = element || this.targetElement;
      options = {
        radius: 24,
        margin: 10,
        offset: { x: 0, y: 0 },
        ...options
      };
      const rect = this.elementRect(element, {
        relative: false,
        ...options
      });
      let path = "";
      path += "M " + rect[0].x + " " + (rect[0].y + options.radius) + " ";
      path += "C " + rect[0].x + " " + rect[0].y + " " + rect[0].x + " " + rect[0].y + " " + (rect[0].x + options.radius) + " " + rect[0].y + " ";
      path += "L " + (rect[1].x - options.radius) + " " + rect[1].y + " ";
      path += "C " + rect[1].x + " " + rect[1].y + " " + rect[1].x + " " + rect[1].y + " " + rect[1].x + " " + (rect[1].y + options.radius) + " ";
      path += "L " + rect[2].x + " " + (rect[2].y - options.radius) + " ";
      path += "C " + rect[2].x + " " + rect[2].y + " " + rect[2].x + " " + rect[2].y + " " + (rect[2].x - options.radius) + " " + rect[2].y + " ";
      path += "L " + (rect[3].x + options.radius) + " " + rect[3].y + " ";
      path += "C " + rect[3].x + " " + rect[3].y + " " + rect[3].x + " " + rect[3].y + " " + rect[3].x + " " + (rect[3].y - options.radius) + " ";
      path += "L " + rect[0].x + " " + (rect[0].y + options.radius) + " ";
      return path.trim();
    },
    elementRect: function(element = null, options = {}) {
      element = element || this.targetElement;
      const bounds = element.getBoundingClientRect();
      console.log("bounds", bounds.left, bounds.top);
      console.log("offset", element.offsetLeft, element.offsetTop);
      options = {
        radius: 24,
        margin: 10,
        offset: { x: 0, y: 0 },
        relative: false,
        ...options
      };
      const left = options.relative ? 0 : element.offsetLeft;
      const top = options.relative ? 0 : element.offsetTop;
      console.log("left/top", left, top);
      let result = [
        {
          x: left - options.margin + options.offset.x,
          y: top - options.margin + options.offset.y
        },
        {
          x: left + element.clientWidth + options.margin + options.offset.x,
          y: top - options.margin + options.offset.y
        },
        {
          x: left + element.clientWidth + options.margin + options.offset.x,
          y: top + element.clientHeight + options.margin + options.offset.y
        },
        {
          x: left - options.margin + options.offset.x,
          y: top + element.clientHeight + options.margin + options.offset.y
        }
      ];
      if (options.positive) {
        let minX = 0;
        let minY = 0;
        for (let i = 0; i < result.length; i++) {
          if (result[i].x < minX) {
            minX = result[i].x;
          }
          if (result[i].y < minY) {
            minY = result[i].y;
          }
        }
        for (let i = 0; i < result.length; i++) {
          result[i].x -= minX;
          result[i].y -= minY;
        }
      }
      return result;
    }
  };
}
export {
  stepComponent as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vY29tcG9uZW50cy9zdGVwLmpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvLyBJbXBvcnQgYW55IGV4dGVybmFsIEphdmFTY3JpcHQgbGlicmFyaWVzIGZyb20gTlBNIGhlcmUuXG4vLyBpbXBvcnQgTW91c2V0cmFwIGZyb20gJ21vdXNldHJhcCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN0ZXBDb21wb25lbnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlc0FjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRhcmdldEVsZW1lbnQ6IG51bGwsXG4gICAgICAgIHNjcm9sbFRpbWVvdXQ6IG51bGwsXG4gICAgICAgIC8vIFlvdSBjYW4gZGVmaW5lIGFueSBvdGhlciBBbHBpbmUuanMgcHJvcGVydGllcyBoZXJlLlxuXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyAgICAgaWYgKHRoaXMuc2Nyb2xsVGltZW91dCkge1xuICAgICAgICAgICAgLy8gICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zY3JvbGxUaW1lb3V0KTtcbiAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gICAgIHRoaXMuc2Nyb2xsVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgIC8vICAgICB9LCAxMDApO1xuICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgICB0aGlzLnRhcmdldEVsZW1lbnQgPSB0aGlzLmZpbmRFbGVtZW50KGtleSk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaW5pdGlhbGl6ZScpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0aGlzLiRlbCcsIHRoaXMuJGVsKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkaWFsb2cgPSB0aGlzLiRyb290LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWRpYWxvZ10nKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZGlhbG9nb3MnLCBkaWFsb2cpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNsaXBQYXRoID0gdGhpcy4kcm9vdC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jbGlwLXBhdGhdJyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NsaXBQYXRoJywgY2xpcFBhdGgpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXF1aXJlc0FjdGlvbicsIHJlcXVpcmVzQWN0aW9uKTtcblxuICAgICAgICAgICAgICAgIGlmIChyZXF1aXJlc0FjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCckd2lyZScsIHRoaXMuJHdpcmUubmV4dFR1dG9yaWFsU3RlcCgpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXRFbGVtZW50LmJsdXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlc2NlbmRhbnRzID0gdGhpcy50YXJnZXRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCI6aG92ZXJcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVzY2VuZGFudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXNjZW5kYW50ID0gZGVzY2VuZGFudHNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY2VuZGFudC5ibHVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZURpYWxvZygpO1xuICAgICAgICAgICAgICAgIGNsaXBQYXRoLnNldEF0dHJpYnV0ZSgnZCcsIHRoaXMuY2xpcFBhdGgoKSk7XG5cbiAgICAgICAgICAgIH0sIDEpO1xuICAgICAgICB9LFxuICAgICAgICAvLyBZb3UgY2FuIGRlZmluZSBhbnkgb3RoZXIgQWxwaW5lLmpzIGZ1bmN0aW9ucyBoZXJlLlxuXG4gICAgICAgIGluaXRpYWxpemVEaWFsb2c6IGZ1bmN0aW9uIChkaWFsb2cgPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoIWRpYWxvZykge1xuICAgICAgICAgICAgICAgIGRpYWxvZyA9IHRoaXMuJHJvb3QucXVlcnlTZWxlY3RvcignW2RhdGEtZGlhbG9nXScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZGlhbG9nUGF0aCA9IGRpYWxvZy5xdWVyeVNlbGVjdG9yKCdbZGF0YS1kaWFsb2ctcGF0aF0nKTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2luaXRpYWxpemVEaWFsb2cnKTtcbiAgICAgICAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLmVsZW1lbnRSZWN0KCk7XG4gICAgICAgICAgICAvLyBjb25zdCBoZWFkZXIgPSBkaWFsb2cucXVlcnlTZWxlY3RvcignW2RhdGEtZGlhbG9nLWhlYWRlcl0nKTtcbiAgICAgICAgICAgIGNvbnN0IHN0cm9rZSA9IGRpYWxvZy5xdWVyeVNlbGVjdG9yKCdbZGF0YS1kaWFsb2ctc3Ryb2tlXScpO1xuXG4gICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oe1xuICAgICAgICAgICAgICAgIHRvcDogcmVjdFswXS55IC0gKHdpbmRvdy5pbm5lckhlaWdodC8zKSxcbiAgICAgICAgICAgICAgICBsZWZ0OiByZWN0WzBdLngsXG4gICAgICAgICAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3Qgd2lkdGggPSByZWN0WzFdLnggLSByZWN0WzBdLng7XG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSByZWN0WzJdLnkgLSByZWN0WzBdLnk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSU1QT1JUQU5UIEhFUkUnKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd3aWR0aCcsIHdpZHRoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdoZWlnaHQnLCBoZWlnaHQpO1xuICAgICAgICAgICAgLy8gdmFyIHkxID0gaGVhZGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcbiAgICAgICAgICAgIC8vIHZhciB5MiA9IHN0cm9rZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG5cbiAgICAgICAgICAgIC8vIHZhciBkaXN0YW5jZSA9IHkyIC0geTE7XG5cbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdkaXN0YW5jZScsIGRpc3RhbmNlLCB5MiwgeTEpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlY3QnLCByZWN0KTtcblxuICAgICAgICAgICAgY29uc3QgeCA9IHJlY3RbMF0ueDtcbiAgICAgICAgICAgIGNvbnN0IHkgPSByZWN0WzBdLnk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygneCcsIHgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3knLCB5KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkaWFsb2cnLCBkaWFsb2cpO1xuICAgICAgICAgICAgLy8gZGlhbG9nID0gdGhpcy4kcm9vdC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1kaWFsb2ddJyk7XG4gICAgICAgICAgICBkaWFsb2cuc3R5bGUud2lkdGggPSBgJHt3aWR0aH1weGA7XG4gICAgICAgICAgICBkaWFsb2cuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke3h9cHgsICR7eX1weClgO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0RlbGF5ZWQgZGlhbG9nJywgZGlhbG9nKTtcblxuICAgICAgICAgICAgLy8gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtZGlhbG9nXScpLmZvckVhY2goKGRpYWxvZykgPT4ge1xuICAgICAgICAgICAgLy8gICAgZGlhbG9nLnJlbW92ZSgpO1xuICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc2VsZi4kcm9vdCcsIHNlbGYuJHJvb3QpO1xuICAgICAgICAgICAgLy8gc2VsZi4kcm9vdC5hcHBlbmRDaGlsZChkaWFsb2cpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvbWV0aGluZycpKTtcbiAgICAgICAgICAgIC8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb21ldGhpbmcnKS5hcHBlbmRDaGlsZChkaWFsb2cpO1xuICAgICAgICAgICAgLy8gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaWFsb2cpO1xuICAgICAgICAgICAgLy8gfSwgMTAwMCk7XG4gICAgICAgICAgICBzdHJva2Uuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fXB4YDtcblxuICAgICAgICAgICAgZGlhbG9nUGF0aC5zZXRBdHRyaWJ1dGUoJ2QnLCB0aGlzLmVsZW1lbnRQYXRoKG51bGwsIHtyZWxhdGl2ZTogdHJ1ZSwgcG9zaXRpdmU6IHRydWV9KSlcbiAgICAgICAgfSxcblxuICAgICAgICBjbGlwUGF0aDogZnVuY3Rpb24gKGVsZW1lbnQgPSBudWxsLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50IHx8IHRoaXMudGFyZ2V0RWxlbWVudDtcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgcmFkaXVzOiAyNCxcbiAgICAgICAgICAgICAgICBtYXJnaW46IDEwLFxuICAgICAgICAgICAgICAgIG9mZnNldDoge3g6IDAsIHk6IDB9LFxuICAgICAgICAgICAgICAgIHJlbGF0aXZlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYCR7dGhpcy53aW5kb3dQYXRoKCl9ICR7dGhpcy5lbGVtZW50UGF0aChlbGVtZW50LCBvcHRpb25zKX1gLnRyaW0oKTtcbiAgICAgICAgfSxcblxuICAgICAgICB3aW5kb3dQYXRoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zdCBkb2N1bWVudEhlaWdodCA9IE1hdGgubWF4KFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQsXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodCxcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0LFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gVE9ETzogYWRkIG9wdGlvbiB0byBzZWxlY3QgY2xvY2t3aXNlIC9jb3VudGVyIGNsb2Nrd2lzZVxuICAgICAgICAgICAgLy9NIDAgOCBDIDAgMCAwIDAgOCAwIEwgMzggMCBDIDQ2IDAgNDYgMCA0NiA4IEMgNDYgMTYgNDYgMTYgMzggMTYgTCA4IDE2IEMgMCAxNiAwIDE2IDAgOFxuICAgICAgICAgICAgbGV0IHBhdGggPSAnTSAwIDAgJztcbiAgICAgICAgICAgIHBhdGggKz0gJ0wgMCAnICsgZG9jdW1lbnRIZWlnaHQgKyAnICc7XG4gICAgICAgICAgICBwYXRoICs9ICdMICcgKyB3aW5kb3cuaW5uZXJXaWR0aCArICcgJyArIGRvY3VtZW50SGVpZ2h0ICsgJyAnO1xuICAgICAgICAgICAgcGF0aCArPSAnTCAnICsgd2luZG93LmlubmVyV2lkdGggKyAnIDAgJztcbiAgICAgICAgICAgIHBhdGggKz0gJ0wgMCAwICc7XG5cbiAgICAgICAgICAgIHJldHVybiBwYXRoLnRyaW0oKTtcbiAgICAgICAgfSxcblxuICAgICAgICBmaW5kRWxlbWVudDogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yLnJlcGxhY2UoL1xcLi9nLCAnXFxcXCQmJykpXG4gICAgICAgICAgICAgICAgPz8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZWxlbWVudFBhdGg6IGZ1bmN0aW9uIChlbGVtZW50ID0gbnVsbCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudCB8fCB0aGlzLnRhcmdldEVsZW1lbnQ7XG4gICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHJhZGl1czogMjQsXG4gICAgICAgICAgICAgICAgbWFyZ2luOiAxMCxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IHt4OiAwLCB5OiAwfSxcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZWN0ID0gdGhpcy5lbGVtZW50UmVjdChlbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgcmVsYXRpdmU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbGV0IHBhdGggPSAnJztcbiAgICAgICAgICAgIHBhdGggKz0gJ00gJyArIHJlY3RbMF0ueCArICcgJyArIChyZWN0WzBdLnkgKyBvcHRpb25zLnJhZGl1cykgKyAnICc7XG4gICAgICAgICAgICBwYXRoICs9ICdDICcgKyByZWN0WzBdLnggKyAnICcgKyByZWN0WzBdLnkgKyAnICcgKyByZWN0WzBdLnggKyAnICcgKyByZWN0WzBdLnkgKyAnICcgKyAocmVjdFswXS54ICsgb3B0aW9ucy5yYWRpdXMpICsgJyAnICsgcmVjdFswXS55ICsgJyAnO1xuICAgICAgICAgICAgcGF0aCArPSAnTCAnICsgKHJlY3RbMV0ueCAtIG9wdGlvbnMucmFkaXVzKSArICcgJyArIHJlY3RbMV0ueSArICcgJztcbiAgICAgICAgICAgIHBhdGggKz0gJ0MgJyArIHJlY3RbMV0ueCArICcgJyArIHJlY3RbMV0ueSArICcgJyArIHJlY3RbMV0ueCArICcgJyArIHJlY3RbMV0ueSArICcgJyArIHJlY3RbMV0ueCArICcgJyArIChyZWN0WzFdLnkgKyBvcHRpb25zLnJhZGl1cykgKyAnICc7XG4gICAgICAgICAgICBwYXRoICs9ICdMICcgKyByZWN0WzJdLnggKyAnICcgKyAocmVjdFsyXS55IC0gb3B0aW9ucy5yYWRpdXMpICsgJyAnO1xuICAgICAgICAgICAgcGF0aCArPSAnQyAnICsgcmVjdFsyXS54ICsgJyAnICsgcmVjdFsyXS55ICsgJyAnICsgcmVjdFsyXS54ICsgJyAnICsgcmVjdFsyXS55ICsgJyAnICsgKHJlY3RbMl0ueCAtIG9wdGlvbnMucmFkaXVzKSArICcgJyArIHJlY3RbMl0ueSArICcgJztcbiAgICAgICAgICAgIHBhdGggKz0gJ0wgJyArIChyZWN0WzNdLnggKyBvcHRpb25zLnJhZGl1cykgKyAnICcgKyByZWN0WzNdLnkgKyAnICc7XG4gICAgICAgICAgICBwYXRoICs9ICdDICcgKyByZWN0WzNdLnggKyAnICcgKyByZWN0WzNdLnkgKyAnICcgKyByZWN0WzNdLnggKyAnICcgKyByZWN0WzNdLnkgKyAnICcgKyByZWN0WzNdLnggKyAnICcgKyAocmVjdFszXS55IC0gb3B0aW9ucy5yYWRpdXMpICsgJyAnO1xuICAgICAgICAgICAgLy8gcGF0aCArPSAnWic7XG4gICAgICAgICAgICBwYXRoICs9ICdMICcgKyByZWN0WzBdLnggKyAnICcgKyAocmVjdFswXS55ICsgb3B0aW9ucy5yYWRpdXMpICsgJyAnO1xuXG4gICAgICAgICAgICByZXR1cm4gcGF0aC50cmltKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZWxlbWVudFJlY3Q6IGZ1bmN0aW9uIChlbGVtZW50ID0gbnVsbCwgb3B0aW9ucyA9IHt9KSB7XG5cbiAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50IHx8IHRoaXMudGFyZ2V0RWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IGJvdW5kcyA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYm91bmRzJywgYm91bmRzLmxlZnQsIGJvdW5kcy50b3ApO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ29mZnNldCcsIGVsZW1lbnQub2Zmc2V0TGVmdCwgZWxlbWVudC5vZmZzZXRUb3ApO1xuICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICByYWRpdXM6IDI0LFxuICAgICAgICAgICAgICAgIG1hcmdpbjogMTAsXG4gICAgICAgICAgICAgICAgb2Zmc2V0OiB7eDogMCwgeTogMH0sXG4gICAgICAgICAgICAgICAgcmVsYXRpdmU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxlZnQgPSBvcHRpb25zLnJlbGF0aXZlID8gMCA6IGVsZW1lbnQub2Zmc2V0TGVmdDtcbiAgICAgICAgICAgIGNvbnN0IHRvcCA9IG9wdGlvbnMucmVsYXRpdmUgPyAwIDogZWxlbWVudC5vZmZzZXRUb3A7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbGVmdC90b3AnLCBsZWZ0LCB0b3ApO1xuXG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgeDogbGVmdCAtIG9wdGlvbnMubWFyZ2luICsgb3B0aW9ucy5vZmZzZXQueCxcbiAgICAgICAgICAgICAgICAgICAgeTogdG9wIC0gb3B0aW9ucy5tYXJnaW4gKyBvcHRpb25zLm9mZnNldC55XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHg6IGxlZnQgKyBlbGVtZW50LmNsaWVudFdpZHRoICsgb3B0aW9ucy5tYXJnaW4gKyBvcHRpb25zLm9mZnNldC54LFxuICAgICAgICAgICAgICAgICAgICB5OiB0b3AgLSBvcHRpb25zLm1hcmdpbiArIG9wdGlvbnMub2Zmc2V0LnlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgeDogbGVmdCArIGVsZW1lbnQuY2xpZW50V2lkdGggKyBvcHRpb25zLm1hcmdpbiArIG9wdGlvbnMub2Zmc2V0LngsXG4gICAgICAgICAgICAgICAgICAgIHk6IHRvcCArIGVsZW1lbnQuY2xpZW50SGVpZ2h0ICsgb3B0aW9ucy5tYXJnaW4gKyBvcHRpb25zLm9mZnNldC55XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHg6IGxlZnQgLSBvcHRpb25zLm1hcmdpbiArIG9wdGlvbnMub2Zmc2V0LngsXG4gICAgICAgICAgICAgICAgICAgIHk6IHRvcCArIGVsZW1lbnQuY2xpZW50SGVpZ2h0ICsgb3B0aW9ucy5tYXJnaW4gKyBvcHRpb25zLm9mZnNldC55XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMucG9zaXRpdmUpIHtcbiAgICAgICAgICAgICAgICBsZXQgbWluWCA9IDA7XG4gICAgICAgICAgICAgICAgbGV0IG1pblkgPSAwO1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdFtpXS54IDwgbWluWCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWluWCA9IHJlc3VsdFtpXS54O1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdFtpXS55IDwgbWluWSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWluWSA9IHJlc3VsdFtpXS55O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2ldLnggLT0gbWluWDtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2ldLnkgLT0gbWluWTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICB9XG59Il0sCiAgIm1hcHBpbmdzIjogIjtBQUdlLFNBQVIsY0FBK0I7QUFBQSxFQUNJO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFDSixHQUFHO0FBQ3JDLFNBQU87QUFBQSxJQUNILGVBQWU7QUFBQSxJQUNmLGVBQWU7QUFBQTtBQUFBLElBR2YsWUFBWSxXQUFZO0FBVXBCLFdBQUssZ0JBQWdCLEtBQUssWUFBWSxHQUFHO0FBQ3pDLGlCQUFXLE1BQU07QUFDYixnQkFBUSxJQUFJLFlBQVk7QUFDeEIsZ0JBQVEsSUFBSSxZQUFZLEtBQUssR0FBRztBQUNoQyxjQUFNLFNBQVMsS0FBSyxNQUFNLGNB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
